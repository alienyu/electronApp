{"version":3,"sources":["webpack:///./page/web/sunnyFinancing/static/module/ajax.js?83ab**************","webpack:///./~/babel-runtime/core-js/json/stringify.js?4574**************","webpack:///./~/core-js/library/fn/json/stringify.js?6708**************","webpack:///./page/web/sunnyFinancing/main/admin/routes/user/mail/components/history.jsx"],"names":["module","exports","ops","config","url","data","callback","match","substr","length","$","ajax","type","headers","token","localStorage","getItem","contentType","success","status","currentPath","location","hash","split","push","pathname","search","call","Content","History","props","state","columns","title","dataIndex","render","sendTo","deleteHistory","bind","key","dataSource","pagination","current","total","loading","forEach","m","getHistoryList","currentPage","that","setState","method","list","id","newDataSource","filter","item","error","errMsg","history","back","padding","margin","routes","map","index","breadcrumbName","background","minHeight","return","changePage","Component"],"mappings":"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","file":"js/17.chunk.js","sourcesContent":["import React,{Component} from 'react'\nimport { hashHistory} from 'react-router';\n\nmodule.exports = (ops) => {\n    let config = Object.assign({\n        url: \"\",\n        data: \"\",\n        callback: function() {}\n    }, ops);\n    if(config.url.match(/^\\//)) {config.url = config.url.substr(1, config.url.length)}\n    $.ajax({\n        url: \"/v1/\" + config.url,\n        type: \"post\",\n        headers: {token: localStorage.getItem(\"token\")},\n        contentType: \"application/json; charset=utf-8\",\n        data: JSON.stringify(config.data),\n        success: function(data) {\n            if(data.status == 1001) {\n                let currentPath = location.hash.split(\"#\")[1].split(\"?\")[0];\n                hashHistory.push({\n                    pathname: \"/common/login\",\n                    search: \"?returnPath=\" + currentPath\n                });\n            } else {\n                config.callback.call(this, data);\n            }\n        }\n    });\n};\n\n\n// WEBPACK FOOTER //\n// ./page/web/sunnyFinancing/static/module/ajax.js","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/core-js/json/stringify.js\n// module id = 1126\n// module chunks = 1 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 51 52 53 54 55 56 57 58 60 61 62 63 64 65 67 68 69 70 71 73","var core = require('../../modules/_core');\nvar $JSON = core.JSON || (core.JSON = { stringify: JSON.stringify });\nmodule.exports = function stringify(it) { // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/core-js/library/fn/json/stringify.js\n// module id = 1127\n// module chunks = 1 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 51 52 53 54 55 56 57 58 60 61 62 63 64 65 67 68 69 70 71 73","import React,{Component} from 'react'\nimport { hashHistory } from 'react-router';\nimport { Layout, Breadcrumb, Button, Table, Popconfirm, message } from 'antd';const { Content } = Layout;\n\nexport class History extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            columns: [{\n                title: '标题',\n                dataIndex: 'title'\n            }, {\n                title: '内容',\n                dataIndex: 'content'\n            }, {\n                title: '发送对象',\n                dataIndex: 'sendTo',\n                render: sendTo => {\n                    switch(sendTo) {\n                        case \"0\":\n                            return \"所有\";\n                            break;\n                        case \"1\":\n                            return \"资金方\";\n                            break;\n                        case \"2\":\n                            return \"项目方\";\n                            break;\n                    }\n                }\n            }, {\n                title: '发送时间',\n                dataIndex: 'sendTime'\n            }, {\n                title: \"操作\",\n                dataIndex: 'key',\n                render: key => <div style={{\"textAlign\": \"center\"}}>\n                    <Popconfirm placement=\"left\" title=\"是否确认删除?\" onConfirm={this.deleteHistory.bind(this, key)} okText=\"确认\" cancelText=\"取消\">\n                        <Button type=\"danger\">删除</Button>\n                    </Popconfirm></div>\n            }],\n            dataSource: [],\n            pagination: {\n                current: 1,\n                total: 0\n            },\n            loading: false\n        };\n        ['changePage'].forEach(m=>this[m] = this[m].bind(this))\n    }\n\n    componentWillMount() {\n        this.getHistoryList(1);\n    }\n\n    getHistoryList(currentPage) {\n        let that = this;\n        this.setState({loading: true});\n        ajax({\n            url: \"/user/mail/getHistoryList\",\n            method: \"post\",\n            data: {\n                current: currentPage ? currentPage : 1\n            },\n            callback: function(data) {\n                that.setState(\n                    {\n                        loading: false,\n                        pagination: {\n                            current: currentPage,\n                            total: data.data.total\n                        },\n                        dataSource: data.data.list\n                    }\n                )\n            }\n        });\n    }\n\n    deleteHistory(key) {\n        let that = this;\n        ajax({\n            url: \"/user/mail/deleteHistory\",\n            method: \"post\",\n            data: {id: key},\n            callback: function(data) {\n                if(data.status == 200) {\n                    message.success(\"删除成功\", 1);\n                    let newDataSource = that.state.dataSource.filter(item => { return item.key != key});\n                    that.setState({dataSource: newDataSource});\n                } else {\n                    message.error(data.errMsg, 1);\n                }\n            }\n        });\n    }\n\n    return() {\n        history.back();\n    }\n\n    changePage(pagination) {\n        this.getHistoryList(pagination.current)\n    }\n\n    render() {\n        return (\n            <Layout style={{ padding: '0 24px 24px' }}>\n                <Breadcrumb style={{ margin: '12px 0' }}>\n                    {\n                        this.props.routes.map(function (item, index) {\n                            return <Breadcrumb.Item key=\"\">{item.breadcrumbName}</Breadcrumb.Item>\n                        })\n                    }\n                </Breadcrumb>\n                <Content style={{ background: '#fff', padding: 24, margin: 0, minHeight: 280 }}>\n                    <Button icon=\"rollback\" onClick={this.return} style={{\"marginBottom\": \"20px\"}}>返回</Button>\n                    <Table\n                        bordered\n                        dataSource={this.state.dataSource}\n                        columns={this.state.columns}\n                        pagination={this.state.pagination}\n                        onChange={this.changePage}\n                        loading={this.state.loading}\n                    />\n                </Content>\n            </Layout>\n        )\n    }\n}\n\nmodule.exports = History;\n\n\n// WEBPACK FOOTER //\n// ./page/web/sunnyFinancing/main/admin/routes/user/mail/components/history.jsx"],"sourceRoot":""}